"use strict";(self.webpackChunksocial_network_app=self.webpackChunksocial_network_app||[]).push([[677],{7677:function(e,n,t){t.r(n),t.d(n,{default:function(){return j}});var i=t(1413),r=t(4165),a=t(5861),o=t(2791),c=t(9434),u=t(262),s=t(9439),d=t(8874),l=t(3116),v=t(8931),f=t(7019),m=t(5478),p=t(184);function h(e){var n=e.activity,t=(0,v.k6)(),i=(0,o.useState)(null),u=(0,s.Z)(i,2),h=u[0],x=u[1],g=(0,o.useState)(null),y=(0,s.Z)(g,2),Z=y[0],j=y[1],b=(0,o.useState)(null),w=(0,s.Z)(b,2),k=w[0],N=w[1],I=(0,o.useState)(null),_=(0,s.Z)(I,2),M=_[0],O=_[1],S=(0,o.useState)(null),T=(0,s.Z)(S,2),B=T[0],D=T[1],E=(0,o.useState)(!1),P=(0,s.Z)(E,2),U=P[0],C=P[1],W=(0,c.v9)((function(e){return e.userModule})).loggedInUser,A=((0,c.v9)((function(e){return e.postModule})).baseUrl,(0,c.v9)((function(e){return e.activityModule})).unreadActivities),Y=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.createdBy===W._id?n.createdTo:n.createdBy,e.next=3,d.W.getById(t);case 3:i=e.sent,x(i);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,i,a,o,c,u,s,d,l,v;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M&&B){e.next=2;break}return e.abrupt("return");case 2:if("add-like"!==n.type){e.next=12;break}return e.next=5,f.W.getById(n.postId);case 5:t=e.sent,i="".concat((null===M||void 0===M?void 0:M._id)===(null===W||void 0===W?void 0:W._id)?"You":null===M||void 0===M?void 0:M.fullname," liked  post of ").concat(B._id===W._id?"you":null===B||void 0===B?void 0:B.fullname),a="post/".concat(null===t||void 0===t?void 0:t.userId,"/").concat(null===n||void 0===n?void 0:n.postId),N(a),j(i),e.next=33;break;case 12:if("remove-like"!==n.type){e.next=22;break}return e.next=15,f.W.getById(n.postId);case 15:o=e.sent,c="".concat((null===M||void 0===M?void 0:M._id)===(null===W||void 0===W?void 0:W._id)?"You":null===M||void 0===M?void 0:M.fullname," unliked  post of ").concat(B._id===W._id?"you":null===B||void 0===B?void 0:B.fullname),u="post/".concat(null===o||void 0===o?void 0:o.userId,"/").concat(null===n||void 0===n?void 0:n.postId),N(u),j(c),e.next=33;break;case 22:if("add-comment"!==n.type){e.next=32;break}return e.next=25,f.W.getById(n.postId);case 25:s=e.sent,d="".concat((null===M||void 0===M?void 0:M._id)===(null===W||void 0===W?void 0:W._id)?"You":null===M||void 0===M?void 0:M.fullname," added a comment in your post "),l="post/".concat(null===s||void 0===s?void 0:s.userId,"/").concat(null===n||void 0===n?void 0:n.postId),N(l),j(d),e.next=33;break;case 32:"private-message"===n.type&&(v="".concat(M.fullname," sent you a private message"),"message/",N("message/"),j(v));case 33:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){q()}),[M,B]),(0,o.useEffect)((function(){return function(){var e=n.createdTo===W._id?W:h;D(e)}(),function(){var e=n.createdBy===W._id?W:h;O(e)}(),function(){}}),[h]),(0,o.useEffect)((function(){h||Y();var e=A.some((function(e){return e===n._id}));return C(e),function(){}}),[A]),(0,p.jsxs)("section",{className:"notificaiton-preview ".concat(U?"unread":""),onClick:function(){t.push(k)},children:[(0,p.jsx)("div",{className:"img-container",children:(null===M||void 0===M?void 0:M.imgUrl)&&(0,p.jsx)("img",{src:null===M||void 0===M?void 0:M.imgUrl,alt:"",className:"img"})||(0,p.jsx)("img",{src:m,alt:""})}),(0,p.jsx)("div",{className:"content",children:(0,p.jsx)("p",{children:Z})}),(0,p.jsx)("div",{className:"menu",children:(0,p.jsx)("p",{children:(0,p.jsx)(l.Z,{date:n.createdAt})})})]})}function x(){var e=(0,c.v9)((function(e){return e.activityModule})).activities;return null!==e&&void 0!==e&&e.length?(0,p.jsx)("section",{className:"notifications-list",children:e.map((function(e){return(0,p.jsx)(h,{activity:e},null===e||void 0===e?void 0:e._id)}))}):(0,p.jsx)("div",{className:"notifications-list",children:(0,p.jsx)("div",{className:"no-activities-container",children:(0,p.jsx)("p",{children:"No activities"})})})}var g=t(9722),y=t(6695),Z=t(4029);var j=function(){var e=(0,c.v9)((function(e){return e.userModule})).loggedInUser,n=(0,c.v9)((function(e){return e.activityModule})).activities,t=(0,c.I0)();(0,o.useEffect)((function(){if(t((0,u.rd)("notifications")),null!==e&&void 0!==e&&e._id){var n={userId:e._id};t((0,y.au)(n)),t((0,y.ap)())}return(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:t((0,y.T7)());case 3:case"end":return e.stop()}}),e)})))}),[]);var s=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=(new Date).getTime(),n.next=3,t((0,Z.Nq)((0,i.Z)((0,i.Z)({},e),{},{lastSeenActivity:a})));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return n?(0,p.jsxs)("div",{className:"notifications-page",children:[(0,p.jsx)("div",{className:"side-bar",children:(0,p.jsx)("div",{className:"container"})}),(0,p.jsx)("div",{className:"main",children:(0,p.jsx)("div",{className:"container",children:(0,p.jsx)(x,{})})}),(0,p.jsx)("div",{className:"aside",children:(0,p.jsx)("div",{className:"container"})})]}):(0,p.jsx)("div",{className:"message-page",children:(0,p.jsx)("div",{className:"gif-container",children:(0,p.jsx)("img",{className:"loading-gif",src:g,alt:""})})})}},3116:function(e,n,t){t.d(n,{Z:function(){return j}});var i=t(1413),r=t(9439),a=t(3366);var o=t(2791),c=t(3433),u=t(3878),s=t(9199),d=t(181),l=t(5267);function v(e){var n=new Date(e);if(!Number.isNaN(n.valueOf()))return n;var t=String(e).match(/\d+/g);if(null==t||t.length<=2)return n;var i,r=t.map((function(e){return parseInt(e)})),a=(i=r,(0,u.Z)(i)||(0,s.Z)(i)||(0,d.Z)(i)||(0,l.Z)()),o=a[0],v=a[1],f=a.slice(2),m=[o,v-1].concat((0,c.Z)(f));return new Date(Date.UTC.apply(Date,(0,c.Z)(m)))}function f(e,n,t){return e+" "+(1!==e?n+"s":n)+" "+t}var m=["date","formatter","component","live","minPeriod","maxPeriod","title","now"];function p(){return p=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},p.apply(this,arguments)}var h=3600,x=86400,g=7*x,y=30*x,Z=365*x;function j(e){var n=e.date,t=e.formatter,c=void 0===t?f:t,u=e.component,s=void 0===u?"time":u,d=e.live,l=void 0===d||d,j=e.minPeriod,b=void 0===j?0:j,w=e.maxPeriod,k=void 0===w?g:w,N=e.title,I=e.now,_=void 0===I?function(){return Date.now()}:I,M=function(e,n){if(null==e)return{};var t,i,r=(0,a.Z)(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}(e,m),O=(0,o.useState)(_()),S=(0,r.Z)(O,2),T=S[0],B=S[1];(0,o.useEffect)((function(){if(l){var e=function(){var e=v(n).valueOf();if(!e)return console.warn("[react-timeago] Invalid Date provided"),0;var t=Math.round(Math.abs(T-e)/1e3),i=t<60?1e3:t<h?6e4:t<x?36e5:6048e5,r=Math.min(Math.max(i,1e3*b),1e3*k);return r?setTimeout((function(){B(_())}),r):0}();return function(){e&&clearTimeout(e)}}}),[n,l,k,b,_,T]);var D=s,E=v(n).valueOf();if(!E)return null;var P=Math.round(Math.abs(T-E)/1e3),U=E<T?"ago":"from now",C=P<60?[Math.round(P),"second"]:P<h?[Math.round(P/60),"minute"]:P<x?[Math.round(P/h),"hour"]:P<g?[Math.round(P/x),"day"]:P<y?[Math.round(P/g),"week"]:P<Z?[Math.round(P/y),"month"]:[Math.round(P/Z),"year"],W=(0,r.Z)(C,2),A=W[0],Y=W[1],q="undefined"===typeof N?"string"===typeof n?n:v(n).toISOString().substr(0,16).replace("T"," "):N,z="time"===D?(0,i.Z)((0,i.Z)({},M),{},{dateTime:v(n).toISOString()}):M,F=f.bind(null,A,Y,U);return o.createElement(D,p({},z,{title:q}),c(A,Y,U,E,F,_))}},5478:function(e,n,t){e.exports=t.p+"static/media/loading-circle.b8e847dbc0e0c5799a06.gif"}}]);
//# sourceMappingURL=677.77873ba4.chunk.js.map